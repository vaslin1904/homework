
 **Docker**
___________________________________________
## **Задание**
___________________________________________
1. Создать свой кастомный образ nginx на базе alpine. 
2. После запуска nginx должен отдавать кастомную страницу (достаточно изменить дефолтную страницу nginx).
3. Определить разницу между контейнером и образом.
4. Ответить на вопрос: Можно ли в контейнере собрать ядро?
5. Собранный образ необходимо запушить в docker hub и дать ссылку на репозиторий.
_____________________________________________________________________
## **Скрипт для СRON**
_____________________________________________________________________
1. Скрипт можно просмотреть [тут](./scriptotchet.sh).
2. Описание действий представлено в виде комментарий в скрипте.
3. Скрипт обрабатывает временной промежуток представленного файла access.log ([посмотреть тут](./access.log))
с 14 августа 2019 г время 23:50:26 <br>
по 15 августа 2019 г время 00:01:54 <br>
В скрипте предусмотрен временной промежуток с последнего создания отчета по настоящее время для оригинального файла access.log.
______________________________________________
## **Отправка почтой**
______________________________________________
1. Для отправки почтой отчета, созданного скриптом, понадобился пакет **mailx**<br>
*yum install mailx*<br>
2. Настройка почты была произведена с помощью пакета postfix.<br>
**Настройка postfix на отправку локальных писем через внешний сервер с авторизацией по smtp**<br>
1) Добавляем новые строки в файл настроек *cat /etc/postfix/main.cf*<br>
![Правка файла main.cf](картинки/1.png)<br>
2) Создаем файл с информацией об имени пользователя и пароле для авторизации. */etc/postfix/sasl_passwd*<br>
![Правка файла sasl_passwd](картинки/2.png)<br>
Указывается почта и пароль для ее авторизации, на которую будет отсылаться файл отчета.<br>
3)Создаем  файл postfix db.<br>
*sudo postmap /etc/postfix/sasl_passwd*<br>
4)Перезапускаем postfix<br>
*sudo postfix reload*<br>
5)Почта отправляет файл отчета на адрес otusgalkina@yandex.ru командой из скрипта<br>
*echo "Отчет за $(date)" | mailx -s "Обработка файла access.log" -a /vagrant/otchet.log otusgalkina@yandex.ru*<br>
______________________________________________
## **Задание CRON**
______________________________________________
1. Установим пакет **cronie**<br>
*yum install cronie*<br>
2. Задание для cron создано командой:<br>
*crontab -l | { cat; echo "*/1 * * * * /usr/bin/flock -xn /var/lock/scriptotchet.lock -c 'sh /home/vagrant/scriptotchet.sh'"; } | crontab -*<br>
3. Просмотреть задания для cron можно командой **crontab -l**<br>
____________________________________________
## **Итог**
Файл отчета отправлен на почту яндекс.<br>
![Итог](картинки/3.png)
